# ========================================
# AI Value Investor - Backend Configuration
# ========================================
# Copy this file to .env and fill in your actual values
# SECURITY: Never commit .env file to version control!

# ========================================
# APPLICATION SETTINGS
# ========================================
APP_NAME="AI Value Investor API"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=development  # development, staging, production

# Server Configuration
HOST=0.0.0.0
PORT=8000
ALLOWED_ORIGINS=*  # In production, set to your iOS app domain

# ========================================
# SECURITY (Section 5.3)
# ========================================
# IMPORTANT: Generate a strong secret key for JWT tokens
# Example: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440  # 24 hours
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ========================================
# SUPABASE CONFIGURATION (Section 2.4, 2.5)
# ========================================
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-service-role-key-here  # Service role key (server-side only)
SUPABASE_JWT_SECRET=your-supabase-jwt-secret-here  # Optional, for validating Supabase Auth tokens

# Direct PostgreSQL connection (optional)
# Format: postgresql://postgres:password@db.your-project.supabase.co:5432/postgres
DATABASE_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres

# Database Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ========================================
# GOOGLE GEMINI API (Section 3.3, 4.3.1)
# ========================================
# Get your API key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-1.5-pro  # Must be 1.5+ for large context window
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.7

# ========================================
# FINANCIAL MODELING PREP API (Section 3.3)
# ========================================
# Get your API key from: https://financialmodelingprep.com/developer/docs/
FMP_API_KEY=your-fmp-api-key-here
FMP_BASE_URL=https://financialmodelingprep.com/api/v3

# ========================================
# NEWS API CONFIGURATION (Section 3.3)
# ========================================
# NewsAPI.org - Free tier available
# Get your API key from: https://newsapi.org/register
NEWS_API_KEY=your-newsapi-key-here

# SerpApi (Google News scraping) - Alternative to NewsAPI
# Get your API key from: https://serpapi.com/
SERP_API_KEY=your-serpapi-key-here

# Future: FinancialNewsAPI.org ($100/month)
FINANCIAL_NEWS_API_KEY=

# ========================================
# REDIS CONFIGURATION
# ========================================
# For background jobs and caching
# Format: redis://localhost:6379/0 or redis://user:password@host:port/db
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=3600  # 1 hour

# ========================================
# BACKGROUND JOB SCHEDULES (Section 4.1, 4.2)
# ========================================
# Cron format: minute hour day month day-of-week
NEWS_SCRAPING_SCHEDULE=0 7,16 * * *  # 7 AM & 4 PM Mountain Time
WIDGET_UPDATE_SCHEDULE=0 7,16 * * *  # Twice daily

# ========================================
# BUSINESS RULES (Section 5.5)
# ========================================
FREE_TIER_DEEP_RESEARCH_LIMIT=1
PRO_TIER_DEEP_RESEARCH_LIMIT=10
PREMIUM_TIER_DEEP_RESEARCH_LIMIT=-1  # -1 = unlimited

# ========================================
# PERFORMANCE SETTINGS (Section 5.1)
# ========================================
WIDGET_RENDER_TIMEOUT_SECONDS=2
DEEP_RESEARCH_TIMEOUT_SECONDS=30

# ========================================
# VECTOR DATABASE (RAG - Section 4.4)
# ========================================
EMBEDDING_DIMENSION=1536
VECTOR_SIMILARITY_THRESHOLD=0.7
RAG_TOP_K_RESULTS=5

# ========================================
# AI MODEL VERSIONING
# ========================================
AI_MODEL_VERSION=gemini-1.5-pro-20241215

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_PER_MINUTE=60

# ========================================
# EXTERNAL SERVICES
# ========================================
HTTP_TIMEOUT_SECONDS=30

# ========================================
# LEGAL DISCLAIMER (Section 5.2)
# ========================================
LEGAL_DISCLAIMER="For educational purposes only. Not financial advice."
